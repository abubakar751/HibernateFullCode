package com.hibernate.Embeddable;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.Transaction;
import org.hibernate.cfg.Configuration;

public class EmbeddableMain {
    public static void main(String[] args) {
        // Create Hibernate configuration and build session factory
        Configuration configuration = new Configuration();
        configuration.configure("hibernate.cfg.xml"); // Pointing to the correct Hibernate config file
        SessionFactory sessionFactory = configuration.buildSessionFactory();
        
        // Open session
        Session session = sessionFactory.openSession();
        
        // Create UserAddress and UserClassForEmbadableAnnotation objects
        UserAddress userAddress = new UserAddress("90 ft Street", "Sakinaka", "400072");
        UserClassForEmbadableAnnotation userClass = new UserClassForEmbadableAnnotation();
        userClass.setUserName("Abubakar");
        userClass.setAddress(userAddress);
        
        // Begin transaction
        Transaction transaction = session.beginTransaction();
        
        // Save the userClass object
        session.save(userClass);
        
        // Commit transaction
        transaction.commit();
        
        // Close session and session factory
        session.close();
        sessionFactory.close();
        
        System.out.println("User and Address saved successfully!");
    }
}
